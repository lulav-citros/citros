"use strict";(self.webpackChunkcitros_doc=self.webpackChunkcitros_doc||[]).push([[67239],{3905:(t,e,a)=>{a.d(e,{Zo:()=>c,kt:()=>h});var n=a(67294);function r(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function i(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function l(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?i(Object(a),!0).forEach((function(e){r(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function o(t,e){if(null==t)return{};var a,n,r=function(t,e){if(null==t)return{};var a,n,r={},i=Object.keys(t);for(n=0;n<i.length;n++)a=i[n],e.indexOf(a)>=0||(r[a]=t[a]);return r}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(n=0;n<i.length;n++)a=i[n],e.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(t,a)&&(r[a]=t[a])}return r}var s=n.createContext({}),p=function(t){var e=n.useContext(s),a=e;return t&&(a="function"==typeof t?t(e):l(l({},e),t)),a},c=function(t){var e=p(t.components);return n.createElement(s.Provider,{value:e},t.children)},d="mdxType",u={inlineCode:"code",wrapper:function(t){var e=t.children;return n.createElement(n.Fragment,{},e)}},m=n.forwardRef((function(t,e){var a=t.components,r=t.mdxType,i=t.originalType,s=t.parentName,c=o(t,["components","mdxType","originalType","parentName"]),d=p(a),m=r,h=d["".concat(s,".").concat(m)]||d[m]||u[m]||i;return a?n.createElement(h,l(l({ref:e},c),{},{components:a})):n.createElement(h,l({ref:e},c))}));function h(t,e){var a=arguments,r=e&&e.mdxType;if("string"==typeof t||r){var i=a.length,l=new Array(i);l[0]=m;var o={};for(var s in e)hasOwnProperty.call(e,s)&&(o[s]=e[s]);o.originalType=t,o[d]="string"==typeof t?t:r,l[1]=o;for(var p=2;p<i;p++)l[p]=a[p];return n.createElement.apply(null,l)}return n.createElement.apply(null,a)}m.displayName="MDXCreateElement"},97369:(t,e,a)=>{a.r(e),a.d(e,{assets:()=>s,contentTitle:()=>l,default:()=>u,frontMatter:()=>i,metadata:()=>o,toc:()=>p});var n=a(87462),r=(a(67294),a(3905));const i={sidebar_position:30,sidebar_label:"Galactic Orbits"},l="Galactic Orbits",o={unversionedId:"gal_orbits/gal_orbits",id:"gal_orbits/gal_orbits",title:"Galactic Orbits",description:"Overview",source:"@site/docs_tutorials/gal_orbits/gal_orbits.md",sourceDirName:"gal_orbits",slug:"/gal_orbits/",permalink:"/docs_tutorials/gal_orbits/",draft:!1,tags:[],version:"current",sidebarPosition:30,frontMatter:{sidebar_position:30,sidebar_label:"Galactic Orbits"},sidebar:"tutorialSidebar",previous:{title:"Drone",permalink:"/docs_tutorials/drone/"},next:{title:"Lunar Hopper",permalink:"/docs_tutorials/lunar_hopper/"}},s={},p=[{value:"Overview",id:"overview",level:2},{value:"Prerequisites",id:"prerequisites",level:2},{value:"Table of Contents",id:"table-of-contents",level:2},{value:"Installation",id:"installation",level:2},{value:"Workspace Overview",id:"workspace-overview",level:2},{value:"Input Parameters",id:"input-parameters",level:4},{value:"Source Code and Launch File",id:"source-code-and-launch-file",level:4},{value:"Output of the Simulation",id:"output-of-the-simulation",level:4},{value:"CITROS Initialization",id:"citros-initialization",level:2},{value:"Scenario",id:"scenario",level:2},{value:"Parameter Setup",id:"parameter-setup",level:4},{value:"Simulation Setup",id:"simulation-setup",level:4},{value:"Running the Scenario Using CITROS",id:"running-the-scenario-using-citros",level:2},{value:"Results",id:"results",level:2}],c={toc:p},d="wrapper";function u(t){let{components:e,...i}=t;return(0,r.kt)(d,(0,n.Z)({},c,i,{components:e,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"galactic-orbits"},"Galactic Orbits"),(0,r.kt)("h2",{id:"overview"},"Overview"),(0,r.kt)("p",null,"The current project is dedicated to calculations of orbits of the globular star cluster for five different values of the Galactic disk mass: 95, 97.5, 100, 102.5 and 105 billions of the Sun masses.",(0,r.kt)("br",null),"\nGlobular star clusters are gravitationally bound, dense and rich aggregations of stars, that can be found nearly in every galaxy, including our own Milky Way. In comparison with another type of star clusters, the open clusters, globular clusters are populated with older stars and can have up to millions of members. Another notable difference is that they are not part of the disk component but belong to the halo. This means they can be located far from both the thin and thick disks of the Galaxy, which have thicknesses of about 300 pc and 2.6 kpc, respectively."),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"figNGC6316",src:a(8048).Z,title:"NGC6316",width:"726",height:"530"})),(0,r.kt)("p",null,(0,r.kt)("em",{parentName:"p"},"globular star cluster NGC 6316, Atlas Image ","[or Atlas Image mosaic]"," obtained as part of the Two Micron All Sky Survey (2MASS), a joint project of the University of Massachusetts and the Infrared Processing and Analysis Center/California Institute of Technology, funded by the National Aeronautics and Space Administration and the National Science Foundation"),"."),(0,r.kt)("h2",{id:"prerequisites"},"Prerequisites"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Please make sure you have all the ",(0,r.kt)("a",{parentName:"li",href:"../../docs/guides/getting_started#softwares-to-work-with-citros"},"necessary softwares")," to work with CITROS installed on your computer."),(0,r.kt)("li",{parentName:"ol"},"To calculate orbits the Python package ",(0,r.kt)("a",{parentName:"li",href:"https://github.com/ChemelAA/GalOrb-Package"},"GalOrb")," was adopted. It is automatically installed when the docker development container of the project is build. We strongly recommend that you work with ",(0,r.kt)("a",{parentName:"li",href:"/../../docs/guides/dockerfile_overview"},"dockers"),". However, If you are working without docker please check other dependencies in Dockerfile in ",(0,r.kt)("a",{parentName:"li",href:"https://github.com/citros-garden/gal_orbits/tree/main/.devcontainer"},".devcontainer")," folder.")),(0,r.kt)("h2",{id:"table-of-contents"},"Table of Contents"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("a",{parentName:"li",href:"#installation"},"Installation")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("a",{parentName:"li",href:"#workspace-overview"},"Workspace Overview")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("a",{parentName:"li",href:"#citros-initialization"},"CITROS Initialization")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("a",{parentName:"li",href:"#scenario"},"Scenario")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("a",{parentName:"li",href:"#running-the-scenario-using-citros"},"Running the Scenario Using CITROS")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("a",{parentName:"li",href:"#results"},"Results"))),(0,r.kt)("h2",{id:"installation"},"Installation"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Clone the repository:"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"git clone git@github.com:citros-garden/gal_orbits.git\n"))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Open the repository in the ",(0,r.kt)("a",{parentName:"p",href:"../../docs/guides/citros_garden#run-project-in-vscode"},"VScode Dev Container"),".")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("a",{parentName:"p",href:"../../docs/guides/citros_garden#build-the-project"},"Build the project"),"."))),(0,r.kt)("h2",{id:"workspace-overview"},"Workspace Overview"),(0,r.kt)("h4",{id:"input-parameters"},"Input Parameters"),(0,r.kt)("p",null,"Parameters of the simulation with their default values are listed in ",(0,r.kt)("inlineCode",{parentName:"p"},"src/gal_orbits/config/params.yaml")," file:"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Parameter"),(0,r.kt)("th",{parentName:"tr",align:null},"Default"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"publish_freq"),(0,r.kt)("td",{parentName:"tr",align:null},"10"),(0,r.kt)("td",{parentName:"tr",align:null},"frequency of publishing")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"rh"),(0,r.kt)("td",{parentName:"tr",align:null},"0"),(0,r.kt)("td",{parentName:"tr",align:null},"heliocentric distance of the object (in kpc)")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"lon"),(0,r.kt)("td",{parentName:"tr",align:null},"0"),(0,r.kt)("td",{parentName:"tr",align:null},"galactic longitude of the object (in degrees)")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"lat"),(0,r.kt)("td",{parentName:"tr",align:null},"0"),(0,r.kt)("td",{parentName:"tr",align:null},"galactic latitude of the object (in degrees)")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"vr"),(0,r.kt)("td",{parentName:"tr",align:null},"0"),(0,r.kt)("td",{parentName:"tr",align:null},"heliocentric radial velocity of the object (in 100 km/s)")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"pmra"),(0,r.kt)("td",{parentName:"tr",align:null},"0"),(0,r.kt)("td",{parentName:"tr",align:null},"proper motion in right ascension (in mas/year)")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"pmde"),(0,r.kt)("td",{parentName:"tr",align:null},"0"),(0,r.kt)("td",{parentName:"tr",align:null},"proper motion in declination")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"t0"),(0,r.kt)("td",{parentName:"tr",align:null},"0"),(0,r.kt)("td",{parentName:"tr",align:null},"starting time of calculation (in units of 10^7 years)")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"tf"),(0,r.kt)("td",{parentName:"tr",align:null},"10"),(0,r.kt)("td",{parentName:"tr",align:null},"final time of calculation (in units of 10^7 years)")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"M_disc"),(0,r.kt)("td",{parentName:"tr",align:null},"100"),(0,r.kt)("td",{parentName:"tr",align:null},"mass of the disc, in Msun * 10^9, by default, 10^11 Msun")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"M_sph"),(0,r.kt)("td",{parentName:"tr",align:null},"300"),(0,r.kt)("td",{parentName:"tr",align:null},"mass of the spherical component of the Galaxy, in Msun ",(0,r.kt)("em",{parentName:"td"}," 10^9, by default, 3 ")," 10^10 Msun")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"reverse"),(0,r.kt)("td",{parentName:"tr",align:null},"'False'"),(0,r.kt)("td",{parentName:"tr",align:null},"if 'True', set backward direction of time, by default, direction is forward")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"rtol"),(0,r.kt)("td",{parentName:"tr",align:null},"1e-9"),(0,r.kt)("td",{parentName:"tr",align:null},"relative value of the error of the numerical integration scheme, affects the output number of messages")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"atol"),(0,r.kt)("td",{parentName:"tr",align:null},"1e-9"),(0,r.kt)("td",{parentName:"tr",align:null},"absolute value  of the error of the numerical integration scheme, affects the output number of messages")))),(0,r.kt)("p",null,"The table with the parameters for the 115 globular clusters may be found in article, mentioned above: ",(0,r.kt)("a",{parentName:"p",href:"https://link.springer.com/article/10.1134/S1990341318020049"},"Globular Clusters: Absolute Proper Motions and Galactic Orbits"),", ",(0,r.kt)("a",{parentName:"p",href:"https://arxiv.org/pdf/1804.07086.pdf"},"arXiv"),"."),(0,r.kt)("h4",{id:"source-code-and-launch-file"},"Source Code and Launch File"),(0,r.kt)("p",null,"The source code is located in ",(0,r.kt)("inlineCode",{parentName:"p"},"src/gal_orbits/gal_orbits/"),": ",(0,r.kt)("inlineCode",{parentName:"p"},"gal_orbits.py")," - written in Python script that calculates orbits of the globular clusters and ",(0,r.kt)("inlineCode",{parentName:"p"},"__init__.py")," file."),(0,r.kt)("p",null,"The launch file is located in ",(0,r.kt)("inlineCode",{parentName:"p"},"src/gal_orbits/launch/gal_orbits.launch.py"),"."),(0,r.kt)("h4",{id:"output-of-the-simulation"},"Output of the Simulation"),(0,r.kt)("p",null,"The simulated data is published to a topic '/gal_orbits'. Each message is an ",(0,r.kt)("a",{parentName:"p",href:"https://docs.ros2.org/galactic/api/std_msgs/msg/Float64MultiArray.html"},(0,r.kt)("inlineCode",{parentName:"a"},"Float64MultiArray"))," containing 11 variables:"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Variables"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"t"),(0,r.kt)("td",{parentName:"tr",align:null},"time coordinate (in units of 10^7 years),")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"R"),(0,r.kt)("td",{parentName:"tr",align:null},"distance from the galactic axis (in kpc),")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Vr"),(0,r.kt)("td",{parentName:"tr",align:null},"dR/dt, radial component of the velocity (in 100 km/s),")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"fi"),(0,r.kt)("td",{parentName:"tr",align:null},"the position angle relative to Sun direction, counting clockwise if seen from North Galactic Pole (in radians),")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Vfi"),(0,r.kt)("td",{parentName:"tr",align:null},"R*d(fi)/dt, tangential velocity (in 100 km/s),")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"z"),(0,r.kt)("td",{parentName:"tr",align:null},"vertical distance from the galactic plane (in kpc),")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Vz"),(0,r.kt)("td",{parentName:"tr",align:null},"dz/dt, vertical velocity (in 100 km/s),")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"E"),(0,r.kt)("td",{parentName:"tr",align:null},"total energy (in (100 km/s)^2),")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"C"),(0,r.kt)("td",{parentName:"tr",align:null},"angular momentum (in 100 kpc*km/s),")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"xg"),(0,r.kt)("td",{parentName:"tr",align:null},"R*cos(fi), X galactocentric coordinates (in kpc),")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"yg"),(0,r.kt)("td",{parentName:"tr",align:null},"R*sin(fi), Y galactocentric coordinates (in kpc)")))),(0,r.kt)("h2",{id:"citros-initialization"},"CITROS Initialization"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("a",{parentName:"li",href:"../../docs/guides/getting_started#installation"},"Install CITROS"),"."),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("a",{parentName:"li",href:"../../docs/guides/getting_started#initialization"},"Initialize CITROS"),".")),(0,r.kt)("h2",{id:"scenario"},"Scenario"),(0,r.kt)("p",null,"The orbits are calculated in a non-axisymmetric gravitational potential, using an adopted model of the Galaxy with four components: disk, spheroid, dark-matter halo, and a bar. Details on this package, as well as parameters required for simulations, can be found in the article ",(0,r.kt)("a",{parentName:"p",href:"https://link.springer.com/article/10.1134/S1990341318020049"},"Globular Clusters: Absolute Proper Motions and Galactic Orbits"),", ",(0,r.kt)("a",{parentName:"p",href:"https://arxiv.org/pdf/1804.07086.pdf"},"arXiv"),"."),(0,r.kt)("p",null,"Let's check how the mass of the Galactic disk affects the orbit of the globular clusters. For this purpose we can run several simulations with different values of ",(0,r.kt)("inlineCode",{parentName:"p"},"M_disc")," parameter."),(0,r.kt)("h4",{id:"parameter-setup"},"Parameter Setup"),(0,r.kt)("p",null,"Parameters are listed in file ",(0,r.kt)("inlineCode",{parentName:"p"},".citros/parameter_setups/default_param_setup.json"),". For example, to set simulation parameters for cluster ",(0,r.kt)("strong",{parentName:"p"},"NGC 6316")," and calculate its orbits with 5 slightly different masses of the Galaxy disk (95, 97.5, 100, 102.5 and 105 billions of the Sun masses), the following setup may be used:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},'{\n    "packages": {\n        "gal_orbits": {\n            "gal_orbits": {\n                "ros__parameters": {\n                    "publish_freq": 10.0,\n                    "rh": 11.5,\n                    "lon": 357.18,\n                    "lat": 5.76,\n                    "vr": 0.715,\n                    "pmra": -4.52,\n                    "pmde": -3.70,\n                    "t0": 0.0,\n                    "tf": 20.0,\n                    "M_disc": {\n                        "function": "my_func.py:return_next_value",\n                        "args": [[95.0, 97.5, 100.0, 102.5, 105.0]]\n                    },\n                    "M_sph": 30.0,\n                    "reverse": "False",\n                    "rtol": 1e-8,\n                    "atol": 1e-8\n                }\n            }\n        }\n    }\n}\n')),(0,r.kt)("p",null,"The parameters are taken from the article ",(0,r.kt)("a",{parentName:"p",href:"https://link.springer.com/article/10.1134/S1990341318020049"},"Globular Clusters: Absolute Proper Motions and Galactic Orbits"),", ",(0,r.kt)("a",{parentName:"p",href:"https://arxiv.org/pdf/1804.07086.pdf"},"arXiv"),"."),(0,r.kt)("p",null,"Function ",(0,r.kt)("em",{parentName:"p"},"my_func.py:return_next_value")," returns the next listed in ",(0,r.kt)("inlineCode",{parentName:"p"},"args")," value for each subsequent simulation. Function should be written in file ",(0,r.kt)("inlineCode",{parentName:"p"},".citros/parameter_setups/functions/my_func.py"),":"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},"def return_next_value(arr, citros_context):\n    return arr[citros_context['run_id']]\n")),(0,r.kt)("p",null,"Learn more about parameter setup and defining custom functions in ",(0,r.kt)("a",{parentName:"p",href:"../../docs/advanced_guides/citros_structure#directory-parameter_setups"},"Directory parameter_setups")," and ",(0,r.kt)("a",{parentName:"p",href:"../../docs/guides/config_params"},"Adding Functions to Parameter Setup")," pages."),(0,r.kt)("h4",{id:"simulation-setup"},"Simulation Setup"),(0,r.kt)("p",null,"In ",(0,r.kt)("inlineCode",{parentName:"p"},".citros/simulations/simulation_gal_orbits.json")," you can define parameter setup files, launch files, memory to use and so on, please look in ",(0,r.kt)("a",{parentName:"p",href:"https://citros.io/doc/docs_cli/structure/citros_structure#directory-simulations"},"Directory simulations page")," for more information."),(0,r.kt)("h2",{id:"running-the-scenario-using-citros"},"Running the Scenario Using CITROS"),(0,r.kt)("p",null,"After adjusting ",(0,r.kt)("a",{parentName:"p",href:"#parameter-setup"},"parameter")," and ",(0,r.kt)("a",{parentName:"p",href:"#simulation-setup"},"simulation")," setups, follow these steps to ",(0,r.kt)("a",{parentName:"p",href:"../../docs/guides/getting_started#run-simulation"},"Run Simulation"),":"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Name your  batch run simulation: ",(0,r.kt)("inlineCode",{parentName:"li"},"galactic_orbits")),(0,r.kt)("li",{parentName:"ol"},"Add a message to your batch run simulation: ",(0,r.kt)("inlineCode",{parentName:"li"},"first run")),(0,r.kt)("li",{parentName:"ol"},"Run your simulation ",(0,r.kt)("strong",{parentName:"li"}," 5 times "),".")),(0,r.kt)("p",null,"All the results will be saved under ",(0,r.kt)("inlineCode",{parentName:"p"},".citros/data/simulation_gal_orbits/[batch_name]")," folder. ",(0,r.kt)("br",null),"\n",(0,r.kt)("em",{parentName:"p"},"in this case, batch_name is galactic_orbits")),(0,r.kt)("h2",{id:"results"},"Results"),(0,r.kt)("p",null,"Now when your simulation is complete, you're ready to check the results! "),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("a",{parentName:"li",href:"../../docs/guides/getting_started#create-db"},"Create Database")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("a",{parentName:"li",href:"../../docs/guides/getting_started#load-data-to-db"},"Upload data to the database")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("a",{parentName:"li",href:"../../docs/guides/getting_started#verify-data-loaded"},"Verify the data was loaded")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("a",{parentName:"li",href:"../../docs/guides/getting_started#execute-notebook"},"Execute the Notebook")," ",(0,r.kt)("inlineCode",{parentName:"li"},"Disk mass variation.ipynb"),". ",(0,r.kt)("br",null),"\nYou will find the notebook under ",(0,r.kt)("inlineCode",{parentName:"li"},"citros_template/notebooks")," folder.")),(0,r.kt)("p",null,"The notebook has examples prepared using the ",(0,r.kt)("a",{parentName:"p",href:"../../docs/data_analysis"},"citros_data_analysis package")," on how to query, analyze and present results. Feel free to use them or create your own!",(0,r.kt)("br",null),"\nLet's take a look on the results of the notebook."),(0,r.kt)("p",null,"We made ",(0,r.kt)("a",{parentName:"p",href:"#scenario"},"simulations")," of the orbits of the globular cluster NGC 6316 for 5 different masses of the Galactic disk ",(0,r.kt)("inlineCode",{parentName:"p"},"M_disk"),". To get some qualitative idea on how the mass of the Galactic disk affect the orbits, let's first display the projections of the simulated orbits onto the Galactic disk:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},"from citros import CitrosDB\ncitros = CitrosDB(simulation = 'simulation_gal_orbits', batch = 'galactic_orbits')\n\n# query data using citros, get pandas.DataFrame\nF = citros.topic('/gal_orbits').data(['data.data[0]', 'data.data[9]', 'data.data[10]'])\n\n# change, calculate, explore your data - take full advantage of working with pandas python package\nF.rename({'data.data[0]': 't', 'data.data[9]': 'xg', 'data.data[10]': 'yg'}, axis = 1, inplace = True)\n\n# plot with citros:\nfig, ax = citros.plot_graph(F, 'xg', 'yg', '-', set_x_label='x, kpc', set_y_label='y, kpc', title='Projection onto the Galactic plane, NGC 6316')\n\n# add additional information on the graph: position of the Sun and start of the simulation\nax.plot(0, 0, 'y*', markersize = 12)\nax.plot(F['xg'][F['sid']==0].iloc[0], F['yg'][F['sid']==0].iloc[0], 'bo')\n")),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"fig_ngc6316_xy",src:a(42757).Z,title:"fig_ngc6316_xy",width:"534",height:"547"})),(0,r.kt)("p",null,(0,r.kt)("em",{parentName:"p"},"Projection of the globular Galactic cluster NGC 6316's orbits onto the Galactic plane over the next 200 million years. Galactocentric coordinates 'xg' and 'yg' were derived from orbit simulations in a non-axisymmetric gravitational potential, considering five scenarios with slightly varying Galaxy disk masses (95, 97.5, 100, 102.5 and 105 billion solar masses). The yellow star represents the Sun, located at coordinates (0, 0). The simulation starts at the point marked by a blue circle.")),(0,r.kt)("p",null,"Let's visualize the scatter of coordinates at the end of the simulation. The final point of each simulation run corresponds to t = 200 Myr. Using ",(0,r.kt)("inlineCode",{parentName:"p"},"pandas"),", we can easily select coordinates corresponding to the maximum time value. Then, using ",(0,r.kt)("inlineCode",{parentName:"p"},"citros_data_analysis"),", we can display these coordinates along with the mean and standard deviation ellipses:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},"# for each simulation run select the last point (it corresponds to the maximum t)\nf = F.loc[F.groupby('sid')['t'].idxmax()]\n\nfig, ax = citros.plot_sigma_ellipse(f, 'xg', 'yg', n_std = [1,2,3], plot_origin=False, \n                                    set_x_label= 'x, kpc', set_y_label= 'y, kpc', title = 't = 200 Myr')\n")),(0,r.kt)("p",null,"We can also obtain a quantitative understanding of the extent to which the mass of the Galactic disk influences the cluster's orbits. For example, we can check whether the standard deviation of the distance ",(0,r.kt)("inlineCode",{parentName:"p"},"d")," from the Galactic center calculated across different simulations does not exceed 15 percent of the overall average distance ",(0,r.kt)("inlineCode",{parentName:"p"},"d_mean"),". The distance ",(0,r.kt)("inlineCode",{parentName:"p"},"d")," from the Galactic center to the cluster can be calculated as the square root of the sum of the squared values in the 'R' ('data.data","[1]","') and 'z' ('data.data","[5]","') columns."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},"# query data\nF = citros.topic('/gal_orbits').data(['data.data[0]', 'data.data[1]', 'data.data[5]'])\nF.rename({'data.data[0]': 't', 'data.data[1]': 'R', 'data.data[5]': 'z'}, axis = 1, inplace = True)\n\nimport numpy as np\n# calculate galactocentric distance\nF['d'] = np.sqrt(F['R']**2 + F['z']**2)\n")),(0,r.kt)("p",null,"To calculate the average distance from the Galactic center to the cluster, a simple mean of all data points from all simulations is insufficient due to unequal time intervals between points. Instead, we should first calculate the mean distance for each time point across simulations on an equidistant time scale, and then compute the overall mean distance."),(0,r.kt)("p",null,"Although the time range for all simulations is the same (0-20 Myr), the number of points and their corresponding time moments vary. Therefore, we need to establish a correspondence between the different simulations. This can be achieved using the ",(0,r.kt)("inlineCode",{parentName:"p"},"citros_data_analysis.error_analysis package"),". To align the data from different simulations, we can divide the time into a certain number of intervals and assign indexes to these intervals. For each interval, we then calculate the mean distance for each simulation. This approach yields a common set of time values for all simulations, along with a corresponding set of distance values determined for these time points."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},"from citros import CitrosData\ndataset = CitrosData(F, data_label=['d'], units = 'kpc')\ndb = dataset.bin_data(n_bins = 50, param_label = 't')\n\n# calculate statistics among different simulations\nstat = db.get_statistics(return_format='citrosStat')\n\n# get the average distance\nd_mean = stat.mean.mean()\n")),(0,r.kt)("p",null,"Using the ",(0,r.kt)("inlineCode",{parentName:"p"},"citros_data_analysis.validation")," package, we can check whether the standard deviation is not very significant and is less than 15 percent of the average distance from the Galactic center:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},"from citros import Validation\nV = Validation(F, data_label = 'd', param_label = 't', method = 'bin', num = 50, units = 'kpc')\nlog, table, fig = V.std_test(limits = d_mean*0.15, n_std = 1, nan_passed = True, \n                            std_area = True, std_color = 'b')\n")),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"fig_ngc6316_test",src:a(84281).Z,title:"fig_ngc6316_test",width:"732",height:"485"})),(0,r.kt)("p",null,"As we can see, the 1 ",(0,r.kt)("span",{parentName:"p",className:"math math-inline"},(0,r.kt)("span",{parentName:"span",className:"katex"},(0,r.kt)("span",{parentName:"span",className:"katex-mathml"},(0,r.kt)("math",{parentName:"span",xmlns:"http://www.w3.org/1998/Math/MathML"},(0,r.kt)("semantics",{parentName:"math"},(0,r.kt)("mrow",{parentName:"semantics"},(0,r.kt)("mi",{parentName:"mrow"},"\u03c3")),(0,r.kt)("annotation",{parentName:"semantics",encoding:"application/x-tex"},"\\sigma")))),(0,r.kt)("span",{parentName:"span",className:"katex-html","aria-hidden":"true"},(0,r.kt)("span",{parentName:"span",className:"base"},(0,r.kt)("span",{parentName:"span",className:"strut",style:{height:"0.4306em"}}),(0,r.kt)("span",{parentName:"span",className:"mord mathnormal",style:{marginRight:"0.03588em"}},"\u03c3")))))," standard deviation of the distance from the Galactic center to the cluster, occurring due to varying masses of the Galactic disk, is less than 15 percent of the cluster's average distance."))}u.isMDXComponent=!0},8048:(t,e,a)=>{a.d(e,{Z:()=>n});const n=a.p+"assets/images/NGC6316-eed3297eb1f156dead9365ad596626e4.png"},84281:(t,e,a)=>{a.d(e,{Z:()=>n});const n=a.p+"assets/images/fig_ngc6316_test-99b7bda0730f007ca83ba38511ceaba1.png"},42757:(t,e,a)=>{a.d(e,{Z:()=>n});const n=a.p+"assets/images/fig_ngc6316_xy-434b4e62b2069c31eda5c0be1033c536.png"}}]);