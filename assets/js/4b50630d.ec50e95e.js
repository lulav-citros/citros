"use strict";(self.webpackChunkcitros_doc=self.webpackChunkcitros_doc||[]).push([[8248],{3905:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>h});var a=n(7294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var s=a.createContext({}),u=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):r(r({},t),e)),n},p=function(e){var t=u(e.components);return a.createElement(s.Provider,{value:t},e.children)},c="mdxType",m={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},d=a.forwardRef((function(e,t){var n=e.components,i=e.mdxType,o=e.originalType,s=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),c=u(n),d=i,h=c["".concat(s,".").concat(d)]||c[d]||m[d]||o;return n?a.createElement(h,r(r({ref:t},p),{},{components:n})):a.createElement(h,r({ref:t},p))}));function h(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var o=n.length,r=new Array(o);r[0]=d;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l[c]="string"==typeof e?e:i,r[1]=l;for(var u=2;u<o;u++)r[u]=n[u];return a.createElement.apply(null,r)}return a.createElement.apply(null,n)}d.displayName="MDXCreateElement"},9165:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>p,contentTitle:()=>s,default:()=>h,frontMatter:()=>l,metadata:()=>u,toc:()=>c});var a=n(7462),i=(n(7294),n(3905)),o=n(4866),r=n(5162);const l={sidebar_position:5,sidebar_label:"Introduction to CITROS",hide_title:!0},s=void 0,u={unversionedId:"index",id:"index",title:"index",description:"\x3c!--",source:"@site/docs_tutorials/index.md",sourceDirName:".",slug:"/",permalink:"/docs/docs_tutorials/",draft:!1,tags:[],version:"current",sidebarPosition:5,frontMatter:{sidebar_position:5,sidebar_label:"Introduction to CITROS",hide_title:!0},sidebar:"tutorialSidebar",previous:{title:"CITROS in Dockerfile",permalink:"/docs/docs_tutorials/dockerfile_overview/"},next:{title:"Soft Landing",permalink:"/docs/docs_tutorials/soft_landing/"}},p={},c=[{value:"Table of Contents",id:"table-of-contents",level:2},{value:"The Cannon Example Project",id:"the-cannon-example-project",level:2},{value:"Prerequisites",id:"prerequisites",level:3},{value:"Installation",id:"installation",level:3},{value:"Build",id:"build",level:3},{value:"Implementation Overview",id:"implementation-overview",level:3},{value:"Running the Solutions",id:"running-the-solutions",level:3},{value:"Visualization with Foxglove",id:"visualization-with-foxglove",level:3},{value:"Working with CITROS",id:"working-with-citros",level:2},{value:"Prerequisites",id:"prerequisites-1",level:3},{value:"Running a Simulation",id:"running-a-simulation",level:3},{value:"Initialization",id:"initialization",level:3},{value:"Run the Simulation",id:"run-the-simulation",level:3},{value:"Prerequisites",id:"prerequisites-2",level:3},{value:"logging in",id:"logging-in",level:3},{value:"ssh",id:"ssh",level:3},{value:"Initialization",id:"initialization-1",level:3},{value:"Before Running <code>citros init</code>",id:"before-running-citros-init",level:4},{value:"Running <code>citros init</code>",id:"running-citros-init",level:4},{value:"Building and Pushing a Docker Image",id:"building-and-pushing-a-docker-image",level:3},{value:"Running on The Cloud",id:"running-on-the-cloud",level:4},{value:"Configuring a <code>runner</code>",id:"configuring-a-runner",level:4},{value:"Configuring a Simulation",id:"configuring-a-simulation",level:3},{value:"Data Analysis (Online Only)",id:"data-analysis-online-only",level:3},{value:"Results",id:"results",level:4}],m={toc:c},d="wrapper";function h(e){let{components:t,...l}=e;return(0,i.kt)(d,(0,a.Z)({},m,l,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"introduction-to-citros"},"Introduction to CITROS"),(0,i.kt)("p",null,"This tutorial will guide you through the CITROS CLI interface, using a simple ROS 2 example project to demonstrate the usage, while providing useful recommendations and best practices. While this is not a comprehensive guide to all CITROS CLI commands, it should get you up and running using your own projects with CITROS in no time. For further details and an exhaustive guide to the CITROS CLI, refer to the ",(0,i.kt)("a",{parentName:"p",href:"https://citros.io/doc/docs_cli"},"CLI Documentation"),"."),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"orangesqueeze",src:n(3795).Z,title:"CITROS CLI",width:"612",height:"384"})),(0,i.kt)("h2",{id:"table-of-contents"},"Table of Contents"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("a",{parentName:"li",href:"#the-cannon-example-project"},"The Cannon Example Project"),(0,i.kt)("ol",{parentName:"li"},(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("a",{parentName:"li",href:"#prerequisites"},"Prerequisites")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("a",{parentName:"li",href:"#installation"},"Installation")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("a",{parentName:"li",href:"#build"},"Build")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("a",{parentName:"li",href:"#implementation-overview"},"Implementation Overview")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("a",{parentName:"li",href:"#running-the-solutions"},"Running the Solutions")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("a",{parentName:"li",href:"#visualization-with-foxglove"},"Visualization with Foxglove")))),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("a",{parentName:"li",href:"#working-with-citros"},"Working with CITROS"),(0,i.kt)("ol",{parentName:"li"},(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("a",{parentName:"li",href:"#prerequisites-1"},"Prerequisites")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("a",{parentName:"li",href:"#running-a-simulation"},"Running a Simulation")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("a",{parentName:"li",href:"#configuring-a-simulation"},"Configuring a Simulation")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("a",{parentName:"li",href:"#data-analysis-online-only"},"Data analysis"))))),(0,i.kt)("h2",{id:"the-cannon-example-project"},"The Cannon Example Project"),(0,i.kt)("p",null,"This project is a ROS 2 implementation of the ",(0,i.kt)("a",{parentName:"p",href:"https://nasa.github.io/trick/tutorial/ATutASimpleSim"},"cannonball simulation")," provided by NASA Johnson Space Center as part of the tutorial for the\n",(0,i.kt)("a",{parentName:"p",href:"https://nasa.github.io/trick/"},"Trick Simulation Environment"),"."),(0,i.kt)("p",null,"It determines the trajectory and time of impact of a cannon ball that is fired with an initial speed and initial angle, assuming a constant acceleration of gravity (g), and no aerodynamic forces."),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"Cannonball",src:n(9652).Z,title:"Cannonball",width:"640",height:"320"})),(0,i.kt)("p",null,"Two versions of the simulation are provided: an analytic solution and a numeric integration solution."),(0,i.kt)("h3",{id:"prerequisites"},"Prerequisites"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Install ",(0,i.kt)("a",{parentName:"li",href:"https://code.visualstudio.com/download"},"Visual Studio code")),(0,i.kt)("li",{parentName:"ul"},"Install and Run ",(0,i.kt)("a",{parentName:"li",href:"https://docs.docker.com/get-docker/"},"Docker")),(0,i.kt)("li",{parentName:"ul"},"Install ",(0,i.kt)("a",{parentName:"li",href:"https://foxglove.dev/download"},"Foxglove")," (optional)")),(0,i.kt)("h3",{id:"installation"},"Installation"),(0,i.kt)("p",null,"Open cmd on your desktop"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"Clone the project:")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"$ git clone git@github.com:citros-garden/cannon.git\n")),(0,i.kt)("ol",{start:2},(0,i.kt)("li",{parentName:"ol"},"Change to Cannon project directory:")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"$ cd ~/cannon\n")),(0,i.kt)("ol",{start:3},(0,i.kt)("li",{parentName:"ol"},"Open Cannon project in VScode:")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"$ code .\n")),(0,i.kt)("ol",{start:5},(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Re-open in Dev Container"),(0,i.kt)("ol",{parentName:"li"},(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"press on the bottom left corner icon."),(0,i.kt)("p",{parentName:"li"},(0,i.kt)("img",{alt:"Alt text",src:n(1709).Z,width:"1601",height:"881"}))),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Choose ",(0,i.kt)("strong",{parentName:"p"},"Reopen in Container")),(0,i.kt)("p",{parentName:"li"},(0,i.kt)("img",{alt:"Alt text",src:n(7175).Z,width:"1601",height:"881"}))))),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Open VScode terminal and make sure you are in the right location"),(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre"},"ros@docker-desktop:/workspaces/cannon$ \n")))),(0,i.kt)("admonition",{type:"note"},(0,i.kt)("p",{parentName:"admonition"},"From this point, all the actions should be typed in VScode terminal.")),(0,i.kt)("h3",{id:"build"},"Build"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"$ colcon build\n$ source install/local_setup.bash\n")),(0,i.kt)("h3",{id:"implementation-overview"},"Implementation Overview"),(0,i.kt)("p",null,"The project is made out of three ROS nodes - ",(0,i.kt)("inlineCode",{parentName:"p"},"cannon_analytic"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"cannon_numeric")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"scheduler"),". The scheduler node is responsible for driving the simulation by publishing a ",(0,i.kt)("inlineCode",{parentName:"p"},"scheduler")," topic at a given rate (say, 100Hz). The cannon nodes subscribe to this topic, and upon receiving it perform a single calculation step. The rate (",(0,i.kt)("inlineCode",{parentName:"p"},"dt"),") is a ROS parameter for the scheduler node, which means you may change its value in the ",(0,i.kt)("inlineCode",{parentName:"p"},"config/params.yaml")," file, without the need to recompile. The two cannon nodes also have ",(0,i.kt)("inlineCode",{parentName:"p"},"params.yaml")," files of their own, in which you can set the initial speed and angle, and also the time/integration delta (",(0,i.kt)("inlineCode",{parentName:"p"},"dt"),")."),(0,i.kt)("p",null,"Additionally, the ",(0,i.kt)("inlineCode",{parentName:"p"},"scheduler")," node subscribes to a ",(0,i.kt)("inlineCode",{parentName:"p"},"debug")," topic, which, together with the provided Foxglove layout, facilitates a play/pause/step/resume functionality."),(0,i.kt)("p",null,"The output of the simulation, i.e. the topic containing the calculated results, is called ",(0,i.kt)("inlineCode",{parentName:"p"},"cannon/state")," (in both analytic and numeric versions). It is a list of ",(0,i.kt)("inlineCode",{parentName:"p"},"float")," of size 4, the layout being:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"[position_x, position_y, velocity_x, velocity_y]\n")),(0,i.kt)("p",null,"The simulation will halt when ",(0,i.kt)("inlineCode",{parentName:"p"},"position_y")," reaches zero (i.e. impact)."),(0,i.kt)("h3",{id:"running-the-solutions"},"Running the Solutions"),(0,i.kt)("p",null,"The cannon project contains two launch files, one for each solution"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"To Run the analytic solution"),(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"$ ros2 launch scheduler cannon_analytic.launch.py\n"))),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"To run the numeric integration solution"),(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"$ ros2 launch scheduler cannon_numeric.launch.py\n")))),(0,i.kt)("admonition",{type:"note"},(0,i.kt)("p",{parentName:"admonition"},"Running either of the two simulations will result in the logger output being written to the console.")),(0,i.kt)("h3",{id:"visualization-with-foxglove"},"Visualization with Foxglove"),(0,i.kt)("p",null,"To view a graphical representation of the simulation:"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Open ",(0,i.kt)("a",{parentName:"p",href:"https://foxglove.dev/"},"Foxglove")," ")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Press on Foxglove icon at the top right")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Click View")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},'Click "Import layout from file"'),(0,i.kt)("p",{parentName:"li"},(0,i.kt)("img",{alt:"Alt text",src:n(5323).Z,width:"1601",height:"881"}))),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Choose ",(0,i.kt)("inlineCode",{parentName:"p"},"CITROS_Cannon.json")," from the cannon project directory")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Open a new Connection"),(0,i.kt)("p",{parentName:"li"},(0,i.kt)("img",{alt:"Alt text",src:n(4829).Z,width:"1601",height:"881"}))),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Choose Rosbridge and press the 'Open' button"),(0,i.kt)("p",{parentName:"li"},(0,i.kt)("img",{alt:"Alt text",src:n(6641).Z,width:"1601",height:"881"}))),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"You now have a working connection to your simulation.")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"If your simulation has stopped running in the terminal, run one of the ",(0,i.kt)("a",{parentName:"p",href:"#running-the-solutions"},"solutions")," again."))),(0,i.kt)("p",null,"Output example:\n",(0,i.kt)("img",{alt:"Foxglove screenshot",src:n(3488).Z,width:"1212",height:"926"})),(0,i.kt)("h2",{id:"working-with-citros"},"Working with CITROS"),(0,i.kt)("p",null,"Working with the CITROS CLI is pretty straight forward, since there are only two things you need to do - initialize your CITROS repository, and run your project. Additionally, you may configure your CITROS repository to fit your simulation needs, but if all you want to do is to run your project via CITROS with the default configuration, than only two commands are necessary."),(0,i.kt)("h3",{id:"prerequisites-1"},"Prerequisites"),(0,i.kt)("p",null,"But first, let's make sure all the prerequisites for running CITROS have been met:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Open the project (in this case Cannon) inside a VS Code dev-container.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Build and source your project by running:"),(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"$ colcon build\n$ source install/local_setup.bash\n"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"in the dev-container's terminal, run"),(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"$ pip install citros\n")),(0,i.kt)("p",{parentName:"li"},"  You can verify that the installation succeeded by running "),(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"$ citros -V\n1.2.3\n")),(0,i.kt)("p",{parentName:"li"},"  to get the CITROS CLI version installed."))),(0,i.kt)("h3",{id:"running-a-simulation"},"Running a Simulation"),(0,i.kt)(o.Z,{mdxType:"Tabs"},(0,i.kt)(r.Z,{value:"web",label:"Working Offline",mdxType:"TabItem"},(0,i.kt)("h3",{id:"initialization"},"Initialization"),(0,i.kt)("p",null,"Alrighty then! You're now ready to run the first command - ",(0,i.kt)("inlineCode",{parentName:"p"},"init"),", which will initialize your local CITROS repository:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"$ citros init\nUser is not logged in. Initializing Citros locally.\nCreating new citros branch `main`.\nCreating an initial commit.\nChecking out new citros branch `main`.\nInitialized Citros repository.\n")),(0,i.kt)("p",null,"This command creates a folder named ",(0,i.kt)("inlineCode",{parentName:"p"},".citros")," under your project directory, and initializes it as a git repository. The current git branch of the ",(0,i.kt)("inlineCode",{parentName:"p"},".citros")," repository should always be named as the current branch in your ROS project (i.e. ",(0,i.kt)("inlineCode",{parentName:"p"},"main")," in the example above). In case they are different, CITROS will create and/or checkout the branch for you, as can be seen in the output above."),(0,i.kt)("p",null,"The ",(0,i.kt)("inlineCode",{parentName:"p"},".citros")," directory contains several files and folders that capture the state of your project and allow you to configure your simulations according to your needs. We will discuss some of them briefly later on. For a full and detailed description of the contents of the ",(0,i.kt)("inlineCode",{parentName:"p"},".citros"),"  directory, refer to the ",(0,i.kt)("a",{parentName:"p",href:"https://citros.io/doc/docs_cli"},"CLI Documentation"),"."),(0,i.kt)("h3",{id:"run-the-simulation"},"Run the Simulation"),(0,i.kt)("p",null,"After your ",(0,i.kt)("inlineCode",{parentName:"p"},".citros")," repository has been initialized, you're ready to run a CITROS simulation, albeit with all the default configurations, by using the ",(0,i.kt)("inlineCode",{parentName:"p"},"run")," command:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},'$ citros run -n "my_first_batch" -m "my first Citros simulation!"\n? Please choose the simulation you wish to run: \n\u276f simulation_cannon_analytic\n  simulation_cannon_numeric\n')),(0,i.kt)("admonition",{type:"note"},(0,i.kt)("p",{parentName:"admonition"},"This command will run the simulation on your machine, and save all the results under ",(0,i.kt)("inlineCode",{parentName:"p"},".citros/runs/[simulation_name]")," folder. The content of the ",(0,i.kt)("a",{parentName:"p",href:"/docs/docs/citros_structure#directory-runs"},"folder")," will contain "),(0,i.kt)("ul",{parentName:"admonition"},(0,i.kt)("li",{parentName:"ul"},"recorded bags"),(0,i.kt)("li",{parentName:"ul"},"logs from the simulation and citros itself"),(0,i.kt)("li",{parentName:"ul"},"metadata about the run"),(0,i.kt)("li",{parentName:"ul"},"metrics and information about the system it was running "),(0,i.kt)("li",{parentName:"ul"},"and more.")))),(0,i.kt)(r.Z,{value:"cli",label:"Working Online",mdxType:"TabItem"},(0,i.kt)("h3",{id:"prerequisites-2"},"Prerequisites"),(0,i.kt)("p",null,"In addition to the prerequisites for working with the CITROS CLI offline, make sure:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"You have a working internet connection."),(0,i.kt)("li",{parentName:"ul"},"You have signed up to ",(0,i.kt)("a",{parentName:"li",href:"https://citros.io"},"CITROS")," and have your login password.")),(0,i.kt)("p",null,"Using the CITROS CLI online is very similar, from the user's standpoint, to using it offline. We still use the ",(0,i.kt)("inlineCode",{parentName:"p"},"init")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"run")," commands, albeit with slight alterations or different consequences. In addition, there are a few more commands necessary to interact with the CITROS cloud."),(0,i.kt)("h3",{id:"logging-in"},"logging in"),(0,i.kt)("p",null,"First and foremost, we need to log in:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"$ citros login\nemail: example@lulav.space\nPassword: \nUser logged in.\n")),(0,i.kt)("h3",{id:"ssh"},"ssh"),(0,i.kt)("p",null,"Before we continue to initialize our project, there is one more prerequisite we need to check off that was not yet mentioned: setting up ssh communication with CITROS. Since this process only needs to be performed once per computer, and can be performed using the CITROS website, we will not delve into it here, except to mention that it can be performed via the CLI using the command:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"$ citros setup-ssh\n")),(0,i.kt)("p",null,"for further details, see the ",(0,i.kt)("a",{parentName:"p",href:"https://citros.io/doc/docs_cli"},"CLI Documentation")),(0,i.kt)("h3",{id:"initialization-1"},"Initialization"),(0,i.kt)("h4",{id:"before-running-citros-init"},"Before Running ",(0,i.kt)("inlineCode",{parentName:"h4"},"citros init")),(0,i.kt)("p",null,"First and foremost, the ",(0,i.kt)("inlineCode",{parentName:"p"},".citros")," directory can only be ",(0,i.kt)("strong",{parentName:"p"},"initialized once"),".\nIf the ",(0,i.kt)("inlineCode",{parentName:"p"},".citros")," directory exists in your local project and the project ",(0,i.kt)("a",{parentName:"p",href:"https://citros.io/cannon"},(0,i.kt)("strong",{parentName:"a"},"already exists on the remote server")),", you have to delete the ",(0,i.kt)("inlineCode",{parentName:"p"},".citros")," directory from your project before\nrunning ",(0,i.kt)("inlineCode",{parentName:"p"},"citros init")," command."),(0,i.kt)("h4",{id:"running-citros-init"},"Running ",(0,i.kt)("inlineCode",{parentName:"h4"},"citros init")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"$ citros init\nChecking internet connection...\nChecking ssh...\nUpdating Citros...\nWaiting for repo to be ready...\nCitros repo successfully cloned from remote.\nCreating and checking out a new local branch `main` that will track the remote branch.\nDefault branch of remote 'origin' set to: main\nCitros successfully synched with local project.\nYou may review your changes via `citros status` and commit them via `citros commit`.\nInitialized Citros repository.\n")),(0,i.kt)("p",null,"As you can see, a lot more is happening when you initialize your repository while being logged in. We will not delve into all the details behind the scenes, but as always, feel free to roam through the ",(0,i.kt)("a",{parentName:"p",href:"https://citros.io/doc/docs_cli"},"CLI Documentation")," for further details."),(0,i.kt)("admonition",{title:"Warning",type:"caution"},(0,i.kt)("p",{parentName:"admonition"}," If you try to run ",(0,i.kt)("inlineCode",{parentName:"p"},"init")," while a ",(0,i.kt)("inlineCode",{parentName:"p"},".citros")," directory already exists in your project, you will get a response similar to this:"),(0,i.kt)("pre",{parentName:"admonition"},(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"$ citros init\nThe directory /workspaces/cannon has already been initialized.\nworking remotely with [git@citros.io:lulav/cannon.git].\n")),(0,i.kt)("ol",{parentName:"admonition"},(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"If you want to reinitialize your CITROS repository, you'll have to first delete the current ",(0,i.kt)("inlineCode",{parentName:"p"},".citros")," directory.")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"If you initialized the CITROS repository offline, and it ",(0,i.kt)("a",{parentName:"p",href:"https://citros.io/cannon"},(0,i.kt)("strong",{parentName:"a"},"doesn't exist")," on the remote server yet")," (i.e. it has not been initialized online by you or anyone else) - then rather than deleting the ",(0,i.kt)("inlineCode",{parentName:"p"},".citros")," directory, you can run:"),(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"citros add-remote\n")),(0,i.kt)("p",{parentName:"li"},"which will add the CITROS server as a remote for your CITROS repo on your behalf, and take care of a few other details that are handled when initializing while being logged in."),(0,i.kt)("p",{parentName:"li"},"At this point it is recommended you commit and push your changes to the remote by running:"),(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"citros commit\ncitros push\n"))))),(0,i.kt)("h3",{id:"building-and-pushing-a-docker-image"},"Building and Pushing a Docker Image"),(0,i.kt)("p",null,"Now that our CITROS repository is initialized and synched with the CITROS remote, we have one more important thing we need to do before we can run our simulation on the cloud - we need to build a docker image of our ROS project, tag it with the current commit hash for the project, and upload it to CITROS. Sounds complicated? Not to worry - all this is accomplished by running a single command:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"citros docker-build-push\n")),(0,i.kt)("admonition",{type:"note"},(0,i.kt)("p",{parentName:"admonition"},"As a prerequisite for this command, the working directory of your ROS project must be clean. If it isn't, simply commit your changes first."),(0,i.kt)("pre",{parentName:"admonition"},(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"citros commit\ncitros push\n"))),(0,i.kt)("h4",{id:"running-on-the-cloud"},"Running on The Cloud"),(0,i.kt)("p",null,"After running the previous command, CITROS has a docker image of your ROS project, so we can finally run the simulation on the cloud (notice the ",(0,i.kt)("inlineCode",{parentName:"p"},"-r")," flag):"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},'citros run -n "cloud_test" -m "running in the cloud!" -c 3 -r\n? Please choose the simulation you wish to run: simulation_cannon_analytic\ncreated new batch_id: zzzzzzzz-xxxx-cccc-vvvv-bbbbbbbbbbbb. Running on Citros cluster. See https://citros.io/cannon/batch/zzzzzzzz-xxxx-cccc-vvvv-bbbbbbbbbbbb.\n')),(0,i.kt)("p",null,"The above command will run the ",(0,i.kt)("inlineCode",{parentName:"p"},"cannon_analytic")," simulation 3 times on the CITROS cloud.\nBy clicking the provided link shown in the terminal, you can directly navigate to the ",(0,i.kt)("em",{parentName:"p"},(0,i.kt)("inlineCode",{parentName:"em"},"runs"))," tab on the CITROS website, and see your runs in action."),(0,i.kt)("h4",{id:"configuring-a-runner"},"Configuring a ",(0,i.kt)("inlineCode",{parentName:"h4"},"runner")),(0,i.kt)("p",null,"The runner is the actual machine that will run your image, this machine can be configured and optimized for your simulation. "),(0,i.kt)("admonition",{type:"note"},(0,i.kt)("p",{parentName:"admonition"},"keep in mind that this resources is not free of charge and will be charged accordingly. please refer to the ",(0,i.kt)("a",{parentName:"p",href:"https://citros.io/pricing"},"pricing")," for further details.")),(0,i.kt)("p",null,"When working online, there are several more ways with which you can configure your runner. Specifically, you can directly set the hardware resources that will be used on the cloud. Simply open the ",(0,i.kt)("inlineCode",{parentName:"p"},".citros/simulations/simulation_cannon_analytic.json")," file (for example), set the values according to your needs:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},'"GPU": 0,\n"CPU": 2,\n"MEM": 265,\n')),(0,i.kt)("admonition",{type:"note"},(0,i.kt)("p",{parentName:"admonition"},"the ",(0,i.kt)("inlineCode",{parentName:"p"},"MEM")," field denotes the amount of RAM your simulation requires when running on the cloud in ",(0,i.kt)("em",{parentName:"p"},"Megabytes"),"."),(0,i.kt)("p",{parentName:"admonition"},"the ",(0,i.kt)("inlineCode",{parentName:"p"},"CPU")," field denotes the amount of CPU cores needed by your simulation when running on the cloud.")),(0,i.kt)("p",null,"In addition there are several more useful fields, which are also relevant when working offline:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},'"launch": {\n    "file": "cannon_analytic.launch.py",\n    "package": "scheduler"\n},\n"timeout": 64,\n')),(0,i.kt)("p",null,"The ",(0,i.kt)("inlineCode",{parentName:"p"},"launch")," field specifies the specific launch file for this simulation and the package it resides in. You may change it according to your needs."),(0,i.kt)("p",null,"The ",(0,i.kt)("inlineCode",{parentName:"p"},"timeout")," field, surprisingly enough, sets a timeout (in ",(0,i.kt)("em",{parentName:"p"},"seconds"),") for each simulation run, after which it will be automatically halted."))),(0,i.kt)("p",null,"To fully understand what's going on, we need to familiarize ourselves with three concepts that are core to the way CITROS works:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("h2",{parentName:"li",id:"simulation"},(0,i.kt)("strong",{parentName:"h2"},(0,i.kt)("a",{parentName:"strong",href:"/docs/docs/citros_structure#directory-simulations"},"simulation"))),(0,i.kt)("p",{parentName:"li"},"  The simulation object is defining what you want to run and how. It is a set of the launch file (the what) and the parameter setup (the how) as well as the resources needed for it to run and after how much time it should be killed. "),(0,i.kt)("p",{parentName:"li"},"  Defaults simulation files defined by a ROS 2 launch file. You may have as many launch files as you want in your project, as long as there is at least one. Each simulation will correspond to a launch file in your project. When you run a CITROS simulation, if you don't specify the name of the simulation (using the ",(0,i.kt)("inlineCode",{parentName:"p"},"-s")," flag), a command-line menu will be presented, in which you can use the up and down arrows to choose the simulation you want. The simulation names will be of the form ",(0,i.kt)("inlineCode",{parentName:"p"},"simulation_<name of launch_file>"),". In the case of the Cannon project, we have two launch files - ",(0,i.kt)("inlineCode",{parentName:"p"},"cannon_analytic.launch.py")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"cannon_numeric.launch.py"),", and as you can see in the output above, we are prompted to choose between them. "),(0,i.kt)("p",{parentName:"li"},"  Each simulation also corresponds to a json file of the same name, which resides under the ",(0,i.kt)("a",{parentName:"p",href:"/docs/docs/citros_structure#directory-simulations"},(0,i.kt)("inlineCode",{parentName:"a"},".citros/simulations"))," directory. You may use this file to configure the way your simulation runs. "),(0,i.kt)("p",{parentName:"li"},"  When you run a CITROS simulation, a directory for that simulation is created under the ",(0,i.kt)("a",{parentName:"p",href:"/docs/docs/citros_structure#directory-runs"},(0,i.kt)("inlineCode",{parentName:"a"},".citros/runs"))," directory. This directory will contain subdirectories corresponding to ",(0,i.kt)("strong",{parentName:"p"},"batch"),"es, a new one created every time you run a simulation.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("h2",{parentName:"li",id:"batch"},(0,i.kt)("strong",{parentName:"h2"},"batch")),(0,i.kt)("p",{parentName:"li"},"  Defined as a group of one or more simulation runs. Since you can specify one or more simulations runs ('",(0,i.kt)("em",{parentName:"p"},"completions"),"') when running a CITROS simulation, a ",(0,i.kt)("strong",{parentName:"p"},"batch")," is simply a convenient way to group them together. For instance, in the case of the above example, if we choose ",(0,i.kt)("inlineCode",{parentName:"p"},"simulation_cannon_analytic")," from the menu, the following folder structure will be created: ",(0,i.kt)("inlineCode",{parentName:"p"},".citros/runs/simulation_cannon_analytic/my_first_batch/0"),". The last folder - ",(0,i.kt)("inlineCode",{parentName:"p"},"0"),", is the folder corresponding to the only run for this batch - when you don't specify the number of completions (i.e. runs) using the ",(0,i.kt)("inlineCode",{parentName:"p"},"-c")," flag, it will default to 1, and the name of each run is a zero based index, incremented by one for each additional run.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("h2",{parentName:"li",id:"run"},(0,i.kt)("strong",{parentName:"h2"},"run")),(0,i.kt)("p",{parentName:"li"},"  Defined as a single execution of a simulation as defined by the chosen launch file. Launching CITROS simulations with multiple runs ('",(0,i.kt)("em",{parentName:"p"},"completions"),"') is particularly advantageous when working online, in which case a large number of simulation runs can be simultaneously executed on the CITROS cloud."),(0,i.kt)("p",{parentName:"li"},"  The folder corresponding to a simulation run will contain all the information relevant for that run. Look through such a folder after running a simulation and see for yourself. For further details refer to the ",(0,i.kt)("a",{parentName:"p",href:"https://citros.io/doc/docs_cli"},"CLI Documentation")))),(0,i.kt)("p",null,"By default, when using the ",(0,i.kt)("inlineCode",{parentName:"p"},"run")," command, you must provide a batch name (using the ",(0,i.kt)("inlineCode",{parentName:"p"},"-n")," flag) and a message (using the ",(0,i.kt)("inlineCode",{parentName:"p"},"-m")," flag). The name you provide will be used as the name of the directory in which all runs for this batch will be saved. If a batch by that name already exists - no worries, CITROS will simply add an underscore and an index to the name you provided, thereby keeping the batch directory names unique for each simulation. "),(0,i.kt)("p",null,"Now that you understand what's going on, choose one of the simulations presented in the menu, press enter and see it run..."),(0,i.kt)("h3",{id:"configuring-a-simulation"},"Configuring a Simulation"),(0,i.kt)("p",null,"We just ran a simulation with all the default configurations, which is admittedly not that exciting. Let's see how we can turn things up a notch by setting up dynamic parameter evaluation for our simulation, thereby allowing each run within the same batch to have different parameter values."),(0,i.kt)("p",null,"The ",(0,i.kt)("a",{parentName:"p",href:"/docs/docs/citros_structure#directory-parameter_setups"},(0,i.kt)("inlineCode",{parentName:"a"},".citros/parameter_setups"))," directory stores your JSON-formatted parameter setup files. When you initialize your citros repository, a ",(0,i.kt)("inlineCode",{parentName:"p"},"default_param_setup.json")," file is automatically generated. This file consolidates all the default parameters for every node across all the packages in your ROS project, providing a consolidated and easily accessible record of these parameters."),(0,i.kt)("p",null,"The structured format of the parameter setup files streamlines both the understanding and alteration of parameters for each node in your ROS project. This becomes especially valuable when you're keen to explore the influence of different parameter values on your ROS project's behavior."),(0,i.kt)("p",null,"In the Cannon project, we have a total of three nodes. Let's look at the parameters for the ",(0,i.kt)("inlineCode",{parentName:"p"},"analytic_dynamics")," node in the ",(0,i.kt)("inlineCode",{parentName:"p"},"cannon_analytic")," package, as defined in the ",(0,i.kt)("inlineCode",{parentName:"p"},"default_param_setup.json")," file.\nWe can see we have 3 parameters to play around with - ",(0,i.kt)("inlineCode",{parentName:"p"},"init_speed"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"init_angle")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"dt"),". "),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'//[project]/.citros/parameter_setups/default_param_setup.json\n{\n    "packages": {\n        "cannon_analytic": {\n            "analytic_dynamics": {\n                "ros__parameters": {\n                    "init_speed": 50.0,\n                    "init_angle": 30.0,\n                    "dt": 0.01\n                }\n            }\n        },\n        ...\n    }\n}\n')),(0,i.kt)("p",null,"Let's say we want to find out the optimal initial angle for the cannon, which will provide the maximum range. Assuming we're completely blanking out on high-school physics, let's randomize the value for this parameter, execute several simulation runs, and see where we get the maximum range. To achieve this, we can simply replace the hard-coded default value with a ",(0,i.kt)("a",{parentName:"p",href:"/docs/docs/config_params"},(0,i.kt)("strong",{parentName:"a"},"function object")),". Function objects are json objects comprised of two fields - ",(0,i.kt)("inlineCode",{parentName:"p"},"function")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"args"),". They come in two flavors - numpy and user-defined. For our purposes we can use numpy's random module to generate a normal distribution around a given value:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},'"init_angle": {\n                "function": "numpy.random.normal",\n                "args": [45, 15]\n            },\n')),(0,i.kt)("p",null,"This will cause a normal distribution with a standard deviation of 15 around 45 to be evaluated for every simulation run."),(0,i.kt)("p",null,"Now, if we run"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-batch"},'citros run -n "test_params" -m "testing random initial angle" -c 10\n')),(0,i.kt)("admonition",{type:"note"},(0,i.kt)("p",{parentName:"admonition"},"to run online you need to add ",(0,i.kt)("inlineCode",{parentName:"p"},"-r")," tag")),(0,i.kt)("p",null,"and choose ",(0,i.kt)("inlineCode",{parentName:"p"},"simulation_cannon_analytic")," from the menu, the simulation will run 10 times (sequentially if working offline), and each time the cannon will have a different initial angle. By looking at the ",(0,i.kt)("a",{parentName:"p",href:"#data-analysis-online-only"},"results"),", we can hopefully come to the conclusion that 45 degrees is the optimal angle. "),(0,i.kt)("h3",{id:"data-analysis-online-only"},"Data Analysis (Online Only)"),(0,i.kt)("p",null,"After you've run a batch run on CITROS, your data is stored on CITROS's servers.\nyou can access the data using Python ",(0,i.kt)("a",{parentName:"p",href:"https://pypi.org/project/citros-data-analysis/"},"citros data analysis package")," either from the Python ",(0,i.kt)("a",{parentName:"p",href:"https://citros.io/cannon/blob/main/notebooks/data_analysis.ipynb"},"notebook")," or from a local kernel Python environment."),(0,i.kt)("admonition",{type:"note"},(0,i.kt)("p",{parentName:"admonition"},"citros data analysis package is installed while running ",(0,i.kt)("inlineCode",{parentName:"p"},"pip install citros"),", so at this point you should have this package and you don't have to download it again.")),(0,i.kt)(o.Z,{mdxType:"Tabs"},(0,i.kt)(r.Z,{value:"local_nb",label:"Run Local Notebook",mdxType:"TabItem"},(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Open .citros directory")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Go to notebooks.")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Open data_analysis.ipynb")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Press ",(0,i.kt)("inlineCode",{parentName:"p"},"Run All")," button")))),(0,i.kt)(r.Z,{value:"remote_nb",label:"Run Remote Notebook",mdxType:"TabItem"},(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Make sure your batch run status changed to ",(0,i.kt)("inlineCode",{parentName:"p"},"DONE"))),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Open ",(0,i.kt)("a",{parentName:"p",href:"https://citros.io/cannon/blob/main/notebooks/data_analysis.ipynb"},"notebook"))),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Start Kernel by pressing on ",(0,i.kt)("inlineCode",{parentName:"p"},"Start")," button")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Press ",(0,i.kt)("inlineCode",{parentName:"p"},"Execute All")," button"))))),(0,i.kt)("ol",{start:5},(0,i.kt)("li",{parentName:"ol"},"Scroll down the notebook to see the results.")),(0,i.kt)("h4",{id:"results"},"Results"),(0,i.kt)("p",null,"here is a sample from the provided ",(0,i.kt)("a",{parentName:"p",href:"https://citros.io/cannon/blob/main/notebooks/data_analysis.ipynb"},"notebook"),":"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},"#import matplotlib\nimport matplotlib.pyplot as plt\n\n#create a figure to plot on\nfig, ax = plt.subplots()\n\ncitros.batch(-1).topic('/cannon/state').sid([0,1,2,3,4]).\\\n       time_plot(ax, var_name = 'data.data[1]', time_step = 0.01, y_label = 'y', title_text = 'y vs. t')\n")),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"Alt text",src:n(7090).Z,width:"1142",height:"910"})))}h.isMDXComponent=!0},5162:(e,t,n)=>{n.d(t,{Z:()=>r});var a=n(7294),i=n(6010);const o={tabItem:"tabItem_Ymn6"};function r(e){let{children:t,hidden:n,className:r}=e;return a.createElement("div",{role:"tabpanel",className:(0,i.Z)(o.tabItem,r),hidden:n},t)}},4866:(e,t,n)=>{n.d(t,{Z:()=>v});var a=n(7462),i=n(7294),o=n(6010),r=n(2466),l=n(6550),s=n(1980),u=n(7392),p=n(12);function c(e){return function(e){return i.Children.map(e,(e=>{if(!e||(0,i.isValidElement)(e)&&function(e){const{props:t}=e;return!!t&&"object"==typeof t&&"value"in t}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}(e).map((e=>{let{props:{value:t,label:n,attributes:a,default:i}}=e;return{value:t,label:n,attributes:a,default:i}}))}function m(e){const{values:t,children:n}=e;return(0,i.useMemo)((()=>{const e=t??c(n);return function(e){const t=(0,u.l)(e,((e,t)=>e.value===t.value));if(t.length>0)throw new Error(`Docusaurus error: Duplicate values "${t.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[t,n])}function d(e){let{value:t,tabValues:n}=e;return n.some((e=>e.value===t))}function h(e){let{queryString:t=!1,groupId:n}=e;const a=(0,l.k6)(),o=function(e){let{queryString:t=!1,groupId:n}=e;if("string"==typeof t)return t;if(!1===t)return null;if(!0===t&&!n)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return n??null}({queryString:t,groupId:n});return[(0,s._X)(o),(0,i.useCallback)((e=>{if(!o)return;const t=new URLSearchParams(a.location.search);t.set(o,e),a.replace({...a.location,search:t.toString()})}),[o,a])]}function k(e){const{defaultValue:t,queryString:n=!1,groupId:a}=e,o=m(e),[r,l]=(0,i.useState)((()=>function(e){let{defaultValue:t,tabValues:n}=e;if(0===n.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(t){if(!d({value:t,tabValues:n}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${t}" but none of its children has the corresponding value. Available values are: ${n.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return t}const a=n.find((e=>e.default))??n[0];if(!a)throw new Error("Unexpected error: 0 tabValues");return a.value}({defaultValue:t,tabValues:o}))),[s,u]=h({queryString:n,groupId:a}),[c,k]=function(e){let{groupId:t}=e;const n=function(e){return e?`docusaurus.tab.${e}`:null}(t),[a,o]=(0,p.Nk)(n);return[a,(0,i.useCallback)((e=>{n&&o.set(e)}),[n,o])]}({groupId:a}),f=(()=>{const e=s??c;return d({value:e,tabValues:o})?e:null})();(0,i.useLayoutEffect)((()=>{f&&l(f)}),[f]);return{selectedValue:r,selectValue:(0,i.useCallback)((e=>{if(!d({value:e,tabValues:o}))throw new Error(`Can't select invalid tab value=${e}`);l(e),u(e),k(e)}),[u,k,o]),tabValues:o}}var f=n(2389);const g={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};function y(e){let{className:t,block:n,selectedValue:l,selectValue:s,tabValues:u}=e;const p=[],{blockElementScrollPositionUntilNextRender:c}=(0,r.o5)(),m=e=>{const t=e.currentTarget,n=p.indexOf(t),a=u[n].value;a!==l&&(c(t),s(a))},d=e=>{let t=null;switch(e.key){case"Enter":m(e);break;case"ArrowRight":{const n=p.indexOf(e.currentTarget)+1;t=p[n]??p[0];break}case"ArrowLeft":{const n=p.indexOf(e.currentTarget)-1;t=p[n]??p[p.length-1];break}}t?.focus()};return i.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,o.Z)("tabs",{"tabs--block":n},t)},u.map((e=>{let{value:t,label:n,attributes:r}=e;return i.createElement("li",(0,a.Z)({role:"tab",tabIndex:l===t?0:-1,"aria-selected":l===t,key:t,ref:e=>p.push(e),onKeyDown:d,onClick:m},r,{className:(0,o.Z)("tabs__item",g.tabItem,r?.className,{"tabs__item--active":l===t})}),n??t)})))}function b(e){let{lazy:t,children:n,selectedValue:a}=e;const o=(Array.isArray(n)?n:[n]).filter(Boolean);if(t){const e=o.find((e=>e.props.value===a));return e?(0,i.cloneElement)(e,{className:"margin-top--md"}):null}return i.createElement("div",{className:"margin-top--md"},o.map(((e,t)=>(0,i.cloneElement)(e,{key:t,hidden:e.props.value!==a}))))}function N(e){const t=k(e);return i.createElement("div",{className:(0,o.Z)("tabs-container",g.tabList)},i.createElement(y,(0,a.Z)({},e,t)),i.createElement(b,(0,a.Z)({},e,t)))}function v(e){const t=(0,f.Z)();return i.createElement(N,(0,a.Z)({key:String(t)},e))}},9652:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/CannonInit-8344c7c43fee3bdf61ea3be3a4ce9e94.png"},1709:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/container_corner-f8c50033906f369e40bdaf20be574baf.png"},7175:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/container_open_container-41c041099556b7ec2a713ba2444c9d24.png"},4829:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/foxglove_connection-bf88605ed4e767d61fad33aec9bb154d.png"},5323:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/foxglove_open-f39d9ead654d2eb518c5ce9e0de950aa.png"},6641:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/foxglove_rosbridge-c5e64c6d5b79820786e834d9dcd46959.png"},3488:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/foxglove_screenshot-8b82912ff4ecaed893d7e540e0b4f99d.png"},7090:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/nb_sample-4fb211887f00d4632afa9d8662e467b8.png"},3795:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/orange_squeeze-22d42f55efca96cadffc64eb9efad82f.jpg"}}]);