"use strict";(self.webpackChunkcitros_doc=self.webpackChunkcitros_doc||[]).push([[4710],{3905:(t,e,a)=>{a.d(e,{Zo:()=>u,kt:()=>k});var n=a(7294);function r(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function l(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function i(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?l(Object(a),!0).forEach((function(e){r(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function o(t,e){if(null==t)return{};var a,n,r=function(t,e){if(null==t)return{};var a,n,r={},l=Object.keys(t);for(n=0;n<l.length;n++)a=l[n],e.indexOf(a)>=0||(r[a]=t[a]);return r}(t,e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(n=0;n<l.length;n++)a=l[n],e.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(t,a)&&(r[a]=t[a])}return r}var s=n.createContext({}),p=function(t){var e=n.useContext(s),a=e;return t&&(a="function"==typeof t?t(e):i(i({},e),t)),a},u=function(t){var e=p(t.components);return n.createElement(s.Provider,{value:e},t.children)},d="mdxType",m={inlineCode:"code",wrapper:function(t){var e=t.children;return n.createElement(n.Fragment,{},e)}},c=n.forwardRef((function(t,e){var a=t.components,r=t.mdxType,l=t.originalType,s=t.parentName,u=o(t,["components","mdxType","originalType","parentName"]),d=p(a),c=r,k=d["".concat(s,".").concat(c)]||d[c]||m[c]||l;return a?n.createElement(k,i(i({ref:e},u),{},{components:a})):n.createElement(k,i({ref:e},u))}));function k(t,e){var a=arguments,r=e&&e.mdxType;if("string"==typeof t||r){var l=a.length,i=new Array(l);i[0]=c;var o={};for(var s in e)hasOwnProperty.call(e,s)&&(o[s]=e[s]);o.originalType=t,o[d]="string"==typeof t?t:r,i[1]=o;for(var p=2;p<l;p++)i[p]=a[p];return n.createElement.apply(null,i)}return n.createElement.apply(null,a)}c.displayName="MDXCreateElement"},3798:(t,e,a)=>{a.r(e),a.d(e,{assets:()=>s,contentTitle:()=>i,default:()=>m,frontMatter:()=>l,metadata:()=>o,toc:()=>p});var n=a(7462),r=(a(7294),a(3905));const l={sidebar_position:70,sidebar_label:"Lunar Starship"},i="Lunar Starship",o={unversionedId:"lunar_starship/lunar_starship",id:"lunar_starship/lunar_starship",title:"Lunar Starship",description:"Overview",source:"@site/docs_tutorials/lunar_starship/lunar_starship.md",sourceDirName:"lunar_starship",slug:"/lunar_starship/",permalink:"/docs_tutorials/lunar_starship/",draft:!1,tags:[],version:"current",sidebarPosition:70,frontMatter:{sidebar_position:70,sidebar_label:"Lunar Starship"},sidebar:"tutorialSidebar",previous:{title:"Lunar Hopper",permalink:"/docs_tutorials/lunar_hopper/"},next:{title:"Pendulum",permalink:"/docs_tutorials/pendulum/"}},s={},p=[{value:"Overview",id:"overview",level:2},{value:"Prerequisites",id:"prerequisites",level:2},{value:"Table of Contents",id:"table-of-contents",level:2},{value:"Installation",id:"installation",level:2},{value:"Workspace Overview",id:"workspace-overview",level:2},{value:"CITROS Initialization",id:"citros-initialization",level:2},{value:"Scenario",id:"scenario",level:2},{value:"Running the Scenario Using CITROS",id:"running-the-scenario-using-citros",level:2},{value:"Results",id:"results",level:2}],u={toc:p},d="wrapper";function m(t){let{components:e,...l}=t;return(0,r.kt)(d,(0,n.Z)({},u,l,{components:e,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"lunar-starship"},"Lunar Starship"),(0,r.kt)("h2",{id:"overview"},"Overview"),(0,r.kt)("p",null,"This Lunar Starship mission project addresses the lunar hopper challenge by optimizing the ascent, ballistic flight and landing process on the Moon's surface, aiming to minimize fuel consumption, time, etc. It empowers users to define both theoretical and real dynamic functions, enhancing prediction accuracy and enabling real-time corrections during lunar mission. "),(0,r.kt)("p",null,"Through the Lunar Starship project, researchers are paving the way for sustainable lunar exploration, as it not only optimizes missions but also conserves valuable resources for extended stays on the Moon. By allowing for the integration of real dynamic functions, it fosters adaptability and resilience in lunar operations, making it a cornerstone of future lunar exploration endeavors."),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"jpg",src:a(8239).Z,title:"FoxGlove example",width:"4800",height:"2700"})),(0,r.kt)("h2",{id:"prerequisites"},"Prerequisites"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Please make sure you have all the ",(0,r.kt)("a",{parentName:"li",href:"../../docs/guides/getting_started#prerequisites-for-working-with-citros"},"necessary softwares")," to work with CITROS installed on your computer."),(0,r.kt)("li",{parentName:"ol"},"Install ",(0,r.kt)("a",{parentName:"li",href:"https://code.visualstudio.com/download"},"Visual Studio code"),"."),(0,r.kt)("li",{parentName:"ol"},"We strongly recommend that you work with ",(0,r.kt)("a",{parentName:"li",href:"../../docs/guides/dockerfile_overview"},"dockers"),". However, if you wish to work without dockers, please refer to the .devcontainer ",(0,r.kt)("a",{parentName:"li",href:"https://github.com/citros-garden/aerosandbox_cessna/tree/main/.devcontainer"},"directory")," in project's repo, the dependencies you need are in the ",(0,r.kt)("inlineCode",{parentName:"li"},"Dockerfile")," file."),(0,r.kt)("li",{parentName:"ol"},"(Optional) Install ",(0,r.kt)("a",{parentName:"li",href:"https://docs.Foxglove.dev/docs/introduction"},"Foxglove"),".")),(0,r.kt)("h2",{id:"table-of-contents"},"Table of Contents"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("a",{parentName:"li",href:"#installation"},"Installation")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("a",{parentName:"li",href:"#workspace-overview"},"Workspace Overview")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("a",{parentName:"li",href:"#citros-initialization"},"CITROS Initialization")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("a",{parentName:"li",href:"#scenario"},"Scenario")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("a",{parentName:"li",href:"#running-the-scenario-using-citros"},"Running the Scenario Using CITROS")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("a",{parentName:"li",href:"#results"},"Results"))),(0,r.kt)("h2",{id:"installation"},"Installation"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Clone the repository:")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"git clone git@github.com:citros-garden/lunar_starship.git\n")),(0,r.kt)("ol",{start:2},(0,r.kt)("li",{parentName:"ol"},"Open the repository in the ",(0,r.kt)("a",{parentName:"li",href:"https://citros.io/doc/docs_tutorials/getting_started/#open-project-in-vscode-dev-container"},"VScode Dev Container"),".")),(0,r.kt)("h2",{id:"workspace-overview"},"Workspace Overview"),(0,r.kt)("p",null,"The Lunar Starship simulation has the following ROS 2 parameters: "),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Parameter"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"),(0,r.kt)("th",{parentName:"tr",align:null},"Package"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"h_0"),(0,r.kt)("td",{parentName:"tr",align:null},"Initial altitude above lunar surface level"),(0,r.kt)("td",{parentName:"tr",align:null},"lunar_starship")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"lat_0"),(0,r.kt)("td",{parentName:"tr",align:null},"Initial latitude"),(0,r.kt)("td",{parentName:"tr",align:null},"lunar_starship")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"long_0"),(0,r.kt)("td",{parentName:"tr",align:null},"Initial longitude"),(0,r.kt)("td",{parentName:"tr",align:null},"lunar_starship")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"vn_0"),(0,r.kt)("td",{parentName:"tr",align:null},'Initial "northing" velocity'),(0,r.kt)("td",{parentName:"tr",align:null},"lunar_starship")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"ve_0"),(0,r.kt)("td",{parentName:"tr",align:null},'Initial "east" velocity'),(0,r.kt)("td",{parentName:"tr",align:null},"lunar_starship")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"vd_0"),(0,r.kt)("td",{parentName:"tr",align:null},"Initial vertical velocity"),(0,r.kt)("td",{parentName:"tr",align:null},"lunar_starship")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"m_fuel_0"),(0,r.kt)("td",{parentName:"tr",align:null},"Initial fuel mass"),(0,r.kt)("td",{parentName:"tr",align:null},"lunar_starship")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"lat_f"),(0,r.kt)("td",{parentName:"tr",align:null},"Final latitude"),(0,r.kt)("td",{parentName:"tr",align:null},"lunar_starship")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"long_f"),(0,r.kt)("td",{parentName:"tr",align:null},"Final longitude"),(0,r.kt)("td",{parentName:"tr",align:null},"lunar_starship")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"vn_f"),(0,r.kt)("td",{parentName:"tr",align:null},'Final "northing" velocity'),(0,r.kt)("td",{parentName:"tr",align:null},"lunar_starship")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"ve_f"),(0,r.kt)("td",{parentName:"tr",align:null},'Final "east" velocity'),(0,r.kt)("td",{parentName:"tr",align:null},"lunar_starship")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"vd_f"),(0,r.kt)("td",{parentName:"tr",align:null},"Final vertical velocity"),(0,r.kt)("td",{parentName:"tr",align:null},"lunar_starship")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"m_fuel_f"),(0,r.kt)("td",{parentName:"tr",align:null},"Final fuel mass"),(0,r.kt)("td",{parentName:"tr",align:null},"lunar_starship")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"dry_mass"),(0,r.kt)("td",{parentName:"tr",align:null},"dry mass"),(0,r.kt)("td",{parentName:"tr",align:null},"lunar_starship")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"F_thrustmax"),(0,r.kt)("td",{parentName:"tr",align:null},"The maximum amount of thrust"),(0,r.kt)("td",{parentName:"tr",align:null},"lunar_starship")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Isp"),(0,r.kt)("td",{parentName:"tr",align:null},"Specific impulse"),(0,r.kt)("td",{parentName:"tr",align:null},"lunar_starship")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"simulation_step"),(0,r.kt)("td",{parentName:"tr",align:null},"step of simulation"),(0,r.kt)("td",{parentName:"tr",align:null},"lunar_starship")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"publish_freq"),(0,r.kt)("td",{parentName:"tr",align:null},"Frequency of publishing"),(0,r.kt)("td",{parentName:"tr",align:null},"lunar_starship")))),(0,r.kt)("admonition",{type:"note"},(0,r.kt)("ul",{parentName:"admonition"},(0,r.kt)("li",{parentName:"ul"},"Variables with '_0' are initial conditions."),(0,r.kt)("li",{parentName:"ul"},"variables with '_f' are final conditions."))),(0,r.kt)("p",null,"This project contains only one launch file which will be used for CITROS launch. "),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Launch File"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"),(0,r.kt)("th",{parentName:"tr",align:null},"Package"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"lunar_starship.launch.py"),(0,r.kt)("td",{parentName:"tr",align:null},"Lunar Starship simulation launch file"),(0,r.kt)("td",{parentName:"tr",align:null},"lunar_starship")))),(0,r.kt)("h2",{id:"citros-initialization"},"CITROS Initialization"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("a",{parentName:"li",href:"../../docs/guides/getting_started#installation"},"Install CITROS"),"."),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("a",{parentName:"li",href:"../../docs/guides/getting_started#initialization"},"Initialize CITROS"),".")),(0,r.kt)("h2",{id:"scenario"},"Scenario"),(0,r.kt)("p",null,"This example provides an array of time dependent values of states, which are computed by solving non-linear OCP (optimal control problems) in the standard Bolza form, by using pseudo-spectral collocation methods and adjusted by using an additional real dynamic function. ",(0,r.kt)("br",null),"\nThe OCP solver used in this example is ",(0,r.kt)("a",{parentName:"p",href:"https://mpopt.readthedocs.io/en/latest/"},"MPOPT")," (based on ",(0,r.kt)("a",{parentName:"p",href:"https://en.wikipedia.org/wiki/IPOPT#:~:text=IPOPT%2C%20short%20for%20%22Interior%20Point,the%20EPL%20(formerly%20CPL)."},"IPOPT"),") library modified by Lulav Space team. ",(0,r.kt)("br",null)),(0,r.kt)("p",null,"The output of the simulation comprises critical flight data, such as altitude, velocity, and other relevant parameters, recorded over time intervals. These results are published via ROS 2 topics, allowing for real-time data visualization, analysis, and integration with other ROS-based systems.",(0,r.kt)("br",null)),(0,r.kt)("p",null,"In this tutorial, we will check how far the Starship can fly depending on Specific Impulse. For that, we will launch a simulation batch with a distribution of Specific impulse parameter, starting from 200 and up to 300.\nThe parameter setup is listed in ",(0,r.kt)("inlineCode",{parentName:"p"},".citros/parameter_setups/default_param_setup.json"),".",(0,r.kt)("br",null)),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n    "packages": {\n        "lunar_starship": {\n            "lunar_starship": {\n                "ros__parameters": {\n                    "h_0": 0.0,\n                    "lat_0": 0.0,\n                    "long_0": 0.0,\n                    "vn_0": 0.0,\n                    "ve_0": 0.0,\n                    "vd_0": 0.0,\n                    "m_fuel_0": 3543000.0,\n                    "h_f": 1500.0,\n                    "lat_f": 0.5,\n                    "long_f": 0.5,\n                    "vn_f": 1700.0,\n                    "ve_f": 0.0,\n                    "vd_f": 0.0,\n                    "m_fuel_f": 3543000.0,\n                    "dry_mass": 85000.0,\n                    "Fthrustmax": 20295000.0,\n                    "Isp": {\n                        "function": "my_func.py:func_with_context",\n                        "args": [200]\n                    },\n                    "simulation_step": 1.0,\n                    "publish_freq": 1.0\n                }\n            }\n        }\n    }\n}\n')),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"my_func.py")," file should contain:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},"def func_with_context(num, context):\n    return num + float(context['sid'])*10\n")),(0,r.kt)("p",null,"This function will set the ",(0,r.kt)("inlineCode",{parentName:"p"},"Isp")," parameter in range from 200 to 200+10*n, where n = number of runs."),(0,r.kt)("p",null,"Learn more about parameter setup and defining custom functions in ",(0,r.kt)("a",{parentName:"p",href:"../../docs/advanced_guides/citros_structure#directory-simulations"},"Directory parameter_setups")," and ",(0,r.kt)("a",{parentName:"p",href:"../../docs/guides/config_params"},"Adding Functions to Parameter Setup")," pages."),(0,r.kt)("p",null,"In addition to parameter setup, you can configure the simulation performance setup (timeout, CPU, GPU and Memory) as well.\nThese parameters can be found in ",(0,r.kt)("inlineCode",{parentName:"p"},".citros/simulations/simulation_lunar_starship.json"),". ",(0,r.kt)("br",null),"\nLook in ",(0,r.kt)("a",{parentName:"p",href:"../../docs/advanced_guides/citros_structure#directory-simulations"},"Directory simulations page")," for more information."),(0,r.kt)("h2",{id:"running-the-scenario-using-citros"},"Running the Scenario Using CITROS"),(0,r.kt)("p",null,"Follow these steps to ",(0,r.kt)("a",{parentName:"p",href:"../../docs/guides/getting_started#run-simulation"},"Run Simulation"),":"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Name your  batch run simulation: ",(0,r.kt)("inlineCode",{parentName:"li"},"Lunar_Starship")),(0,r.kt)("li",{parentName:"ol"},"Add a message to your batch run simulation: ",(0,r.kt)("inlineCode",{parentName:"li"},"local test run")),(0,r.kt)("li",{parentName:"ol"},"Run your simulation ",(0,r.kt)("strong",{parentName:"li"}," 5 times "),".")),(0,r.kt)("p",null,"All the results will be saved under ",(0,r.kt)("inlineCode",{parentName:"p"},".citros/data/simulation_lunar_starship")," folder."),(0,r.kt)("p",null,"To plot the local run results you can use ",(0,r.kt)("a",{parentName:"p",href:"../../docs/guides/foxglove_visual"},"Foxglove")," with the layout file existing in ",(0,r.kt)("inlineCode",{parentName:"p"},"foxglove_layout")," folder.\n",(0,r.kt)("img",{alt:"png",src:a(2729).Z,title:"FoxGlove example",width:"2495",height:"1511"})),(0,r.kt)("h2",{id:"results"},"Results"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("a",{parentName:"li",href:"../../docs/guides/getting_started#create-db"},"Create Database")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("a",{parentName:"li",href:"../../docs/guides/getting_started#load-data-to-db"},"Upload data to the database")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("a",{parentName:"li",href:"../../docs/guides/getting_started#verify-data-loaded"},"Verify the data was loaded")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("a",{parentName:"li",href:"../../docs/guides/getting_started#execute-notebook"},"Execute the Notebook")," ",(0,r.kt)("inlineCode",{parentName:"li"},"Lunar_Starship.ipynb"),". ",(0,r.kt)("br",null),"\nYou will find the notebook under ",(0,r.kt)("inlineCode",{parentName:"li"},"citros_template/notebooks")," folder.")),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"png",src:a(3801).Z,title:"CITROS example",width:"585",height:"451"})))}m.isMDXComponent=!0},3801:(t,e,a)=>{a.d(e,{Z:()=>n});const n=a.p+"assets/images/citros3-4861d5a5e04ee558dabbfe0192d09adc.png"},2729:(t,e,a)=>{a.d(e,{Z:()=>n});const n=a.p+"assets/images/img0-966ce06feeb769686355adae2d23a637.png"},8239:(t,e,a)=>{a.d(e,{Z:()=>n});const n=a.p+"assets/images/starship-a593c6ff8e226896321b429b157babcb.jpg"}}]);